<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>vue-resource</title>
        <link rel="stylesheet" href="style.css">
        <script src="https://cdn.jsdelivr.net/npm/vue"></script>
        <script src="https://cdn.jsdelivr.net/npm/vue-resource@1.3.4"></script>
    </head>
    <body>
    
      <div id="app">    
         <div class="editor">
                <form @submit.prevent="savePost()">
                    <input type="text" placeholder="Заголовок" v-model="post.title">
                    <textarea placeholder="Текст" v-model="post.body"></textarea>
                    <button>Опубликовать</button>
                </form>
        </div>
        <div class="post" v-for="post in posts">
                <h3>{{ post.title }}</h3>
                <p>{{ post.body }}</p>
        </div>   
      </div>  
        
        
        <script>
          
          Vue.use(VueResource)
          
          new Vue({
              el: '#app',
              data: {
                  endpoint: 'https://jsonplaceholder.typicode.com/posts',
                  posts: [],
                  post: {}
              },
              computed: {
                  resource: function() {
                      return this.$resource('https://jsonplaceholder.typicode.com/posts{/id}')
                  }
              },
              methods: {
                  savePost: function() {
          
                      this.resource.save(this.post)
                      this.posts.unshift(this.post)
          
                  },
                  getSinglePost: function() {
          
                      this.resource.get({ id: 101 }).then(function(response) {
          
                          this.post = response.data
          
                      })
          
                  },
                  getAllPosts: function() {
          
                      var options = {
                          params: {
                              _start: 0,
                              _limit: 5
                          },
                          headers: {
                              'Content-Type': 'application/json'
                          }
                      }
          
                      this.$http.get(this.endpoint, options).then(function(response) {
          
                          this.posts = response.data
                          console.log(response.data)
          
                      }, function(error) {
                          // ошибка
                      })
          
                  }
              },
              created: function() {
                  this.getAllPosts()
              }
          })
        </script>
    </body>
</html>